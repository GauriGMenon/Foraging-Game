<form method="POST" action="https://eta2ccwpbj.execute-api.ap-south-1.amazonaws.com/default/music-foraging"> 


    <!-- mturk hit below --> 
    <!-- ***************************************************************************************************************************************** -->
    
    <!-- jquery import -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    
    
    <!-- CSS styling -->
    <style>
    body {
        height: 100%;
        width: 100%;
        padding: 0;
        margin: 0;
        background-color: lemonchiffon; 
    }
    
    .focusimage {
        display: block;
        margin-left: auto;
        margin-right: auto;
        width: 75px;
        height: 75px;
    
    }
    
    .startDiv {
        display: grid;
        grid-template-columns: 20fr 1fr;
        grid-auto-rows: minmax(10px, auto);
        grid-gap: 5px;
        margin: 0 auto;
        font-size: 18px;
        font-family: "Comic Sans MS";
        padding: 25px;
        width: 512px;
        background-color: palegoldenrod;   
    }
    
    #startDiv2 {
        background-color:palegoldenrod; 
        margin: 0 auto;
        font-size: 45px;
        font-family: "Comic Sans MS";
        padding: 20px;
        text-align: center;
        
       
    }
    
    #line0 {
        padding: 5px;
        grid-row: 1 / 1;
        grid-column: 1 / 5;
        text-align: center;
        text-decoration: underline;
        font-size: 30px;
    }
    
    #line01 {
        padding: 5px;
        grid-row: 2 / 2;
        grid-column: 1 / 6;
        text-align: center;
        font-size: 22px;
    }
    
    #line02 {
        padding: 5px;
        grid-row: 3 / 3;
        grid-column: 1 / 6;
        text-align: center;
    }
    
    #line03 {
        padding: 5px;
        grid-column: 1 / 6;
        text-align: center;
    }
    
    #line1 {
        text-align: center;
       
    }
    
    #line2 {
        padding: 5px;
        grid-row: 2 / 3;
        grid-column: 1 / 2;
    }
    
    #line3 {
        grid-row: 2 / 3;
        grid-column: 2 / 3;
    }
    
    #line4 {
        grid-row: 3 / 4;
        grid-column: 1 / 3;
        font-size: 14px;
    }
    
    #line100 {
        grid-row: 4 / 5;
        grid-column: 1 / 3;
    }
    
    #startDiv2, #startDiv4, #startDiv3 {
        display: none;
    }
    
    #startDiv3{
        background-color:lemonchiffon; 
        margin: 0 auto;
        font-size: 45px;
        font-family: "Comic Sans MS";
        padding: 20px;
        text-align: center;
        height:100%;
        
    }
    
    #line5 {
        font-family: "Comic Sans MS";
        text-align: center;
        font-size: 20px;
        background-color: palegoldenrod;
    }
    
    #line6 {
        color: green;
        grid-row: 2 / 3;
        grid-column: 1 / 2;
    }
    
    #line7 {
        grid-row: 2 / 3;
        grid-column: 2 / 3;
    }
    
    #line8 {
        grid-row: 3 / 4;
        grid-column: 1 / 3;
    }
    
    #line9 {
        grid-row: 4 / 5;
        grid-column: 1 / 2;
    }
    
    #line10 {
        grid-row: 4 / 5;
        grid-column: 2 / 3;
    }
    
    #line10_5 {
        grid-row: 5 / 6;
        grid-column: 1 / 3;
    }
    
    #line11 {
        grid-row: 6 / 7;
        grid-column: 1 / 3;
    }
    
    #line12 {
        grid-row: 7 / 8;
        grid-column: 1 / 3;
    }
    
    #startExperiment {
        grid-row: 8 / 9;
        grid-column: 1 / 3;
    }
    
    #trialDiv {
        position: absolute;
        height: 100%;
        width: 100%;
        display: none;
        font-size: 25px;
        font-family: "Comic Sans MS";
        background-color: palegoldenrod;
    }
    
    
    #road {
        position: absolute;
        height: 100%;
        width: 25%;
        left: 37.5%;
    }
    
    .lane {
        position: absolute;
        height: 100%;
        overflow: hidden;
        width: 12.5%;
        max-width: 150px;
    }
    
    #leftlane {
        right: 62.5%;
    }
    
    #rightlane {
        left: 62.5%;
    }
    
    .bush {
        position: absolute;
        width: 100%;
        max-width: 150px;
    }
    
    #explore {
        position: absolute;
        left: 63%;
        bottom: 7%;
        max-width: 150px;
    }
    
    #fixation {
        position: absolute;
        left: 0;
        right: 0;
        margin-left: auto;
        margin-right: auto;
        bottom: 7.5%;
        max-width: 135px;
    }
    
    #bushOutput {
        position: absolute;
        color: green;
        left: 15%;
        display: none;
    }
    
    #breakDiv {
        display: none;
        margin: 0 auto;
        font-size: 20px;
        font-family: "Comic Sans MS";
        padding: 20px;
        width: 500px;
        background-color: palegoldenrod;
        text-align: center;
    
    }
    
    #finishDiv {
        margin: 0 auto;
        font-size: 20px;
        font-family: "Comic Sans MS";
        width: 500px;
        padding: 20px;
        display: none;
        background-color: palegoldenrod;
        text-align: center;
    }
    
    #submitButton {
        position: absolute;
        left: 50%;
        display: none;
        background-color: palegoldenrod;
        font-family: "Comic Sans MS";
        padding: 20px;
        width: 500px;
        font-size: 20px;
        text-align: center;
    
    }
    /* #startExperiment {
        display: none;
    } */
    #music1 {
        display: none;
    }
    #music2 {
        display: none;
        
    }
    
    .slidecontainer {
      width: 100%; /* Width of the outside container */
    }
    
    /* The slider itself */
    .slider {
      -webkit-appearance: none;  /* Override default CSS styles */
      appearance: none;
      width: 100%; /* Full-width */
      height: 25px; /* Specified height */
      background: #d3d3d3; /* Grey background */
      outline: none; /* Remove outline */
      opacity: 0.7; /* Set transparency (for mouse-over effects on hover) */
      -webkit-transition: .2s; /* 0.2 seconds transition on hover */
      transition: opacity .2s;
    }
    
    /* Mouse-over effects */
    .slider:hover {
      opacity: 1; /* Fully shown on mouse-over */
    }
    
    /* The slider handle (use -webkit- (Chrome, Opera, Safari, Edge) and -moz- (Firefox) to override default look) */
    .slider::-webkit-slider-thumb {
      -webkit-appearance: none; /* Override default look */
      appearance: none;
      width: 25px; /* Set a specific slider handle width */
      height: 25px; /* Slider handle height */
      background: #04AA6D; /* Green background */
      cursor: pointer; /* Cursor on hover */
    }
    
    .slider::-moz-range-thumb {
      width: 25px; /* Set a specific slider handle width */
      height: 25px; /* Slider handle height */
      background: #04AA6D; /* Green background */
      cursor: pointer; /* Cursor on hover */
    }
    </style>
    
    
    
    
    
    
    
    <!-- html elements -->
    <div id="startDiv1" class="startDiv">
        <div class="slidecontainer">
            <p id="line0">Valence Arousal scales:</p>
            <br>
            <p id="line01">Mark the scale according to how you feel now.</p>
            <br>
            <p id="line02">1 being <b>very sad</b> and 10 being <b>very happy</b></p>
            <input type="range" min="1" max="10" value="5" class="slider" id="myRangeOne">
            <p id="demoOne">0</p>
            <script>
                var valence1= 20;
                var arousal1=20;
                var valence2= 20;
                var arousal2=20;
                var valence3= 20;
                var arousal3=20;
    
    
                var blockNumber = "b1";
                var sliderOne = document.getElementById("myRangeOne");
                var outputOne = document.getElementById("demoOne");
                outputOne.innerHTML = sliderOne.value; // Display the default slider value
                // Update the current slider value (each time you drag the slider handle)
                sliderOne.oninput = function() {
                  outputOne.innerHTML = this.value;
                  var valence1= outputOne;
                }</script>
            <br>
            <p id="line03">1 being <b>very calm</b> and 10 being <b>very excited(or anxious)</b></p>
            <br>
            <input type="range" min="1" max="10" value="5" class="slider" id="myRangeTwo">
            <p id="demoTwo">0</p>
            <script>
                var blockNumber = "b2";
                var sliderTwo = document.getElementById("myRangeTwo");
                var outputTwo = document.getElementById("demoTwo");
                outputTwo.innerHTML = sliderTwo.value; // Display the default slider value
                // Update the current slider value (each time you drag the slider handle)
                sliderTwo.oninput = function() {
                  outputTwo.innerHTML = this.value;
                  var arousal1= outputTwo;
                }</script>
          </div>
          <br>
          <p><a href="#" id="next12">Next</a></p>
    </div>
     
    
    <div id="startDiv2" class="startDiv">
        <p id="line1" style="font-size:20px">Now, music will play in the next page for 3 minutes after which the game will start automatically.<br/><br/> You are requested to pay attention to the music and make sure you start the game as soon as it starts.
        <br/> <br/>   
        <a href="#" id="next23" style="font-size:20px">Next</a></p>
    </div>
    
    <div id="startDiv4" class="startDiv">
        <div class="slidecontainer" id="slidecontainer2">
            <p id="line0">Valence Arousal scales:</p>
            <br>
            <p id="line01">Mark the scale according to how you feel now.</p>
            <br>
            <p id="line02">1 being <b>very sad</b> and 10 being <b>very happy</b></p>
            <input type="range" min="1" max="10" value="5" class="slider" id="myRange21">
            <p id="demo21">0</p>
            <script>
                var blockNumber = "b21";
                var slider21 = document.getElementById("myRange21");
                var output21 = document.getElementById("demo21");
                output21.innerHTML = slider21.value; // Display the default slider value
                // Update the current slider value (each time you drag the slider handle)
                slider21.oninput = function() {
                  output21.innerHTML = this.value;
                  var valence2= output21;
                }</script>
            <br>
            <p id="line03">1 being <b>very calm</b> and 10 being <b>very excited(or anxious)</b></p>
            <br>
            <input type="range" min="1" max="10" value="5" class="slider" id="myRange22">
            <p id="demo22">0</p>
            <script>
                var blockNumber = "b22";
                var slider22 = document.getElementById("myRange22");
                var output22 = document.getElementById("demo22");
                output22.innerHTML = slider22.value; // Display the default slider value
                // Update the current slider value (each time you drag the slider handle)
                slider22.oninput = function() {
                  output22.innerHTML = this.value;
                  var arousal2= output22;
                }</script>
          </div>
          <br>
        <p id="line5">THE GAME BEGINS NOW!<br/><br/>  On each trial, you will either choose to <b>stay</b> at the bush you are at or <b>leave</b> the current bush and travel to a fresh bush.<br/> 
        <br>
        <a href="#" id="startExperiment">Start Experiment</a></p>
    </div>
    
    <div id="startDiv3">
        <script>
            var music=Math.floor((Math.random() * 2) + 1);
            $(document).ready(function ChooseMusic(){
            if(music==1){
                $('#music1').show();
                var withmusic=1 // music 1 is sad
            }
            else{
                $('#music2').show();
                var withmusic=2 // music 2 is happy
            }
            })
        </script>
        <div id="music1">
            
                
                <embed src="music_1.mp3" loop="true" autostart="true" width="2" height="0">
        
        </div>
        <div id="music2">
            
                <embed src="music_2.mp3" loop="true" autostart="true" width="2" height="0">
        
        </div>
        <img src="black_cross.png" alt="Black Cross" class="focusimage">
        <script> 
            // $("#Next34").click(function (){
            //     var startTime  = 10;     //time before start experiment button becomes visible from when music starts 
            //     setTimeout(function () {
            //     $('#startDiv4').css("display", "grid");
            //     $("#startDiv3").hide()
            //     }, startTime * 1000)
            // })();
            function Change(){
                $('#startDiv3').hide();
                $('#startDiv4').css("display", "grid");     //well i just defined the change function and ran it on setTimeout idk why pradeep's code wasn't working it was ok? but this shit works lol
                };
            setTimeout(Change, 10000)
            
        </script>
    </div>
    
    <div id="trialDiv">
        <svg id="road">
            <rect width=100% height=100% style="fill:#ffcc99" />
        </svg>
    
        <div id="leftlane" class="lane">
            <img id="bush0" class="bush" src="bush-md.png">
            <img id="bush2" class="bush" src="bush-md.png">
            <img id="bush4" class="bush" src="bush-md.png">
            <img id="bush6" class="bush" src="bush-md.png">
            <img id="bush8" class="bush" src="bush-md.png">
            <img id="bush10" class="bush" src="bush-md.png">
        </div>
    
        <div id="rightlane" class="lane">
            <img id="bush1" class="bush" src="bush-md.png">
            <img id="bush3" class="bush" src="bush-md.png">
            <img id="bush5" class="bush" src="bush-md.png">
            <img id="bush7" class="bush" src="bush-md.png">
            <img id="bush9" class="bush" src="bush-md.png">
            <img id="bush11" class="bush" src="bush-md.png">
        </div>
    
        <svg id="explore">
            <rect height=100% width=100% style="stroke:green;
                                     stroke-width: 6;
                                     fill:none;"/>
        </svg>
    
        <svg id="fixation">
            <rect id="fixationBorder" height=100% width=100% style="stroke:yellowgreen;
                                                stroke-width: 14;
                                                fill:none;" />
            <rect id="focus" height=0% width=100% style="fill:green;" />
        </svg>
    
        <p id="bushOutput"> 0.0 </p>
    </div>
    
    <div id="breakDiv">
        <p>Click "Next Round" below to start the next scenario.</p>
        <p>In this round, bushes are <b>farther apart</b>, so it will take longer to travel between them.</p><br/>
        <p><a href="#" id="nextBlock">Next Round</a></p>
    </div>
    
    <div id="finishDiv">
        <p>Your time has expired.</p>
    </div>
    
    <div id="data">
        <input name="dummy" value=0 type="hidden">
    </div>
    
    
    
    
    <!-- javascript -->
    <script>
    
    
    // -- parameters --
    var travelTime = 6000;   //time in between bushes in ms (2000)
    var initBerries = 7;    //initial number of berries per bush
    var rateOfDec = 0.5;    //rate at which berries deplete from bush
    var randStdDev = 0.25;
    //parameters used for the second block of time
    var travelTime2 = 2000;
    var initBerries2 = 56 ;
    var rateOfDec2 = 4;
    var randStdDev2 = 2;
    
    var totalTime1 = 10;     //total time allotted for the trial 1 (in seconds)
    var totalTime2 = 10;     //total time allotted for the trial 2 (in seconds)
    
    var speed = 80;         // ms per 1% of the screen distance (inverse speed?) (120)
    var fixationTime = 400; //time it takes to fill fixation square (ms)
    var holdingTime = 1000; //time that result is displayed before user is released
    // ----------------
    var blockNumber = "b1";
    var valence1= 20;
    var arousal1=20;
    var valence2= 20;
    var arousal2=20;
    var valence2= 20;
    var arousal3=20;
    var withmusic=9;
    
    // Code related to setup screen
    $('#next12').click(function() {
        $('#startDiv1').hide();
        $('#startDiv2').css("display", "grid");
    });
    $('#next23').click(function() {
        $('#startDiv2').hide();
        $('#startDiv3').css("display", "grid");
    });
    
    $('#Next34').click(function() {
        $('#startDiv3').hide();
        $('#startDiv4').css("display", "grid");
    });
    
    
    
    // Function to add data in regular, non-ragged obs
    function addObservation(eventLabel, totalTrialTime, reactionTime, decisionType, berryCount, music, musicstat, val1, aro1, val2, aro2, val3, aro3) {
        $('#data').append('<input name="' + eventLabel + '" type="hidden">');
        $('#data').append('<input name="' + eventLabel + '" class="totalTrialTime" value="' + totalTrialTime + '" type="hidden">');
        $('#data').append('<input name="' + eventLabel + '" class="reactionTime" value="' + reactionTime + '" type="hidden">');
        $('#data').append('<input name="' + eventLabel + '" class="trialType" value="' + decisionType + '" type="hidden">');
        $('#data').append('<input name="' + eventLabel + '" class="berryCount" value="' + berryCount + '" type="hidden">');
        $('#data').append('<input name="' + eventLabel + '" class="music" value="' + music + '" type="hidden">');
        $('#data').append('<input name="' + eventLabel + '" class="withmusic" value="' + musicstat + '" type="hidden">');
        $('#data').append('<input name="' + eventLabel + '" class="valence1" value="' + val1 + '" type="hidden">');
        $('#data').append('<input name="' + eventLabel + '" class="arousal1" value="' + aro1 + '" type="hidden">');
        $('#data').append('<input name="' + eventLabel + '" class="valence2" value="' + val2 + '" type="hidden">');
        $('#data').append('<input name="' + eventLabel + '" class="arousal2" value="' + aro2 + '" type="hidden">');
        $('#data').append('<input name="' + eventLabel + '" class="valence3" value="' + val3 + '" type="hidden">');
        $('#data').append('<input name="' + eventLabel + '" class="arousal3" value="' + aro3 + '" type="hidden">');
        console.log($("#data"));
    }
    
    $('#startExperiment').click(showFirstTrial);
    function showFirstTrial() {
        $('body').css('background-color', 'GhostWhite')
        $('.startDiv').hide();
        $('#startDiv3').hide();
        $('#trialDiv').show();
        //draw the bushes
        for (i = 0; i < 12; i++) {
            $('#bush' + i).css("bottom", 7 + (travelTime / speed * i) + "%");
        }
        //draw the explore square
        var ht = $('#bush0').height();
        $('#explore').css({
            'height': ht + 'px',
            'width': ht + 'px'
        })
        //draw the fixation square
        $('#fixation').css({
            'height': ht - 10 + 'px',
            'width': ht - 10 + 'px'
        })
        //draw the bush output
        var bot = $('#bush0').css("bottom");
        $('#bushOutput').css({
            'bottom': bot
        })
    
        //begin the timer
        setTimeout(function() {
            //append the total number of berries collected
            //$('#data').append('<input name=block1totalBerries ' + 'class="totalBerries " value=' + culmBerries + ' type="hidden">');
    
            $('#breakDiv').prepend('<p>You collected <b>' + culmBerries.toFixed(2) + '</b> berries this round!');
            $('#trialDiv').hide();
            $('#breakDiv').show();
        }, totalTime1 * 1000);
    }
    
    
    
    // Code related to task:
    
    // Standard Normal variate using Box-Muller transform
    // returns mean = 0, var = 1
    function randn_bm(sd = 1) {
        var u = 1 - Math.random(); // Subtraction to flip [0, 1) to (0, 1].
        var v = 1 - Math.random();
        return Math.sqrt( -2.0 * Math.log( u ) ) * Math.cos( 2.0 * Math.PI * v ) * sd;
    }
    
    
    
    var bushOnLeft = true;
    
    function moveBushes() {
        selectTime = false;
        $('#explore').hide();
        $('#fixation').hide();
        bushOnLeft = !bushOnLeft;
    
        //append new reaction time data
        var rt = new Date() - startTrialTime;
        var totalTrialTime = new Date() - startInitiateTime;
    
        addObservation(blockNumber + "_p" + (currBush + 1) + "n" + trialPerBush, totalTrialTime, rt, "l", "", music, withmusic, valence1, arousal1, valence2, arousal2, valence3, arousal3)
    
        //$('#data').append('<input name=' + blockNumber + 'rt_bush' + (currBush + 1) + "round" + trialPerBush + ' class="reactionTime" value=' + rt + ' type="hidden">');
        //$('#data').append('<input name=' + blockNumber + 'totalTrialTime_bush' + (currBush + 1) + "round" + trialPerBush + ' class="totalTrialTime" value=' + totalTrialTime + ' type="hidden">');
        //$('#data').append('<input name=' + blockNumber + 'decision_bush' + (currBush + 1) + "round" + trialPerBush + ' class="trialType" value=explore' + ' type="hidden">');
    
        //move the bushes
        $('.bush').animate( {
            bottom: "-=" + (travelTime / speed) + "%"
        }, travelTime, "linear", function() {
            //if bush leaves screen, push it to top of screen
            if ($(this).css('bottom') < "0px") {
                $(this).css('bottom', 7 + (travelTime / speed * 11) + '%');
                //redraw the explore square and bushOutput, contingent on bushOnLeft
                if (bushOnLeft) {
                    $('#explore').css({
                        'right': 'auto',
                        'left': '63%'
                    });
                    $('#bushOutput').css({
                        'right': 'auto',
                        'left': '15%'
                    })
                } else {
                    $('#explore').css({
                        'left': 'auto',
                        'right': '63%'
                    });
                    $('#bushOutput').css({
                        'left': 'auto',
                        'right': '15%'
                    })
                }
                $('#fixationBorder').css('stroke', 'yellowgreen');
                $('#focus').css('height', '0%');
    
                $('#explore').show();
                $('#fixation').show();
                // start a new timer that will track when subject enters box
                startInitiateTime = new Date();
                //related to bushes
                trialPerBush = 1;
                //berries = Math.round(+(initBerries + randn_bm(randStdDev)).toFixed(2));
                berries = +(initBerries + randn_bm(randStdDev)).toFixed(2);
                currBush++;
            }
        });
    
    }
    
    // event listeners
    
    
    var selectTime = false;
    var currBush = 0;
    var trialPerBush = 1;
    //var berries = Math.round(+(initBerries + randn_bm(randStdDev)).toFixed(2));
    var berries = +(initBerries + randn_bm(randStdDev)).toFixed(2);
    var startTrialTime;
    var startInitiateTime = new Date();
    var culmBerries = 0;
    
    $('#fixation').hover(
        function() {   //function while hovering
        if (!selectTime) {
            $('#fixationBorder').css('stroke', 'green');
            myTimer = setTimeout(function () {
                $('#focus').css('height', '100%');
                selectTime = true;
                //begin timer
                startTrialTime = new Date();
            }, fixationTime);
        }
    }, function() {    //function when left
        if (!selectTime) {
            $('#fixationBorder').css('stroke', 'yellowgreen');
            clearTimeout(myTimer);
        }
    })
    
    $('.bush').mouseenter(function() {
        //if you mouseover the bush that is lined up
        if ( $(this).attr('id') == ("bush" + (currBush % 12)) && selectTime) {
            selectTime = false;
            var rt = new Date() - startTrialTime;
            var totalTrialTime = new Date() - startInitiateTime;
            $('#fixation').hide();
            //append new data
            addObservation(blockNumber + "_p" + (currBush + 1) + "n" + trialPerBush, totalTrialTime, rt, "s", berries, music, withmusic, valence1, arousal1, valence2, arousal2, valence3, arousal3)
    
            //$('#data').append('<input name=' + blockNumber + 'berries_bush' + (currBush + 1) + "round" + trialPerBush + ' class="berryCount" value=' + berries + ' type="hidden">');
            //$('#data').append('<input name=' + blockNumber + 'rt_bush' + (currBush + 1) + "round" + trialPerBush + ' class="reactionTime" value=' + rt + ' type="hidden">');
            //$('#data').append('<input name=' + blockNumber + 'totalTrialTime_bush' + (currBush + 1) + "round" + trialPerBush + ' class="totalTrialTime" value=' + totalTrialTime + ' type="hidden">');
            //$('#data').append('<input name=' + blockNumber + 'decision_bush' + (currBush + 1) + "round" + trialPerBush + ' class="trialType" value=exploit' + ' type="hidden">');
    
            culmBerries += berries;
            $('#bushOutput').html('+' + berries);
            $('#bushOutput').delay(500).show(0);
            //display bush output for some time, reset for next round
            setTimeout(function() {
                $('#bushOutput').hide();
                $('#fixationBorder').css('stroke', 'yellowgreen');
                $('#focus').css('height', '0%');
                //decrement berries, but only if positive
                //berries -= Math.round((+(rateOfDec + randn_bm(randStdDev)).toFixed(2)));
                berries -= +(rateOfDec + randn_bm(randStdDev)).toFixed(2);
                berries = +(berries.toFixed(2));
                if (berries < 0) {
                    berries = 0;
                }
    
                trialPerBush++;
                $('#fixation').show();
            }, holdingTime);
        }
    })
    
    $('#explore').mouseenter(function() {
        if (selectTime) {
            moveBushes();
        }
    })
    
    
    $('#nextBlock').click(function() {
        $('.bush').stop();
        //set event variables to initial values
        selectTime = false;
        currBush = 0;
        trialPerBush = 1;
        //berries = Math.round(+(initBerries + randn_bm(randStdDev2)).toFixed(2));
        berries = +(initBerries2 - randn_bm(randStdDev2)).toFixed(2);
        startTrialTime;
        startInitiateTime = new Date();
        culmBerries = 0;
        bushOnLeft = true;
        $('#fixationBorder').css('stroke', 'yellowgreen');
        $('#focus').css('height', '0%');
    
        //set parameters to new parameters
        travelTime = travelTime2;
        initBerries = initBerries2;
        rateOfDec = rateOfDec2;
        blockNumber = "b2"
    
        //redraw the bushes
        for (i = 0; i < 12; i++) {
            $('#bush' + i).css("bottom", 7 + (travelTime / speed * i) + "%");
        }
        //reposition explore square
        $('#explore').css('left', '63%');
        //reposition bushOutput
        $('#bushOutput').css('left', '15%');
    
        $('#breakDiv').hide();
        $('#trialDiv').show();
        $('#explore').show();
        $('#fixation').show();
    
        //begin the timer
        setTimeout(function () {
            //append the total number of berries collected
            //$('#data').append('<input name=Block2totalBerries ' + 'class="totalBerries " value=' + culmBerries + ' type="hidden">');
    
            $('#trialDiv').hide();
            $('#finishDiv').append('<p>You collected <b>' + culmBerries.toFixed(2) + '</b> berries this round!');
            //$('#finishDiv').append('<p>To complete the task and receive your reward, please complete the following survey by following the link below.</p>');
            //$('#finishDiv').append('<p><strong>Make sure to leave this window open as you complete the survey. </strong></p>');
            //$('#finishDiv').append('<p>When you are finished, you will return to this page to paste the code into the box.</p>');
            //$('#finishDiv').append('<div class="row" id="workContent"><div class="col-xs-12 col-md-6 col-md-offset-3"><!-- Content for Worker --><table class="table table-condensed table-bordered"><colgroup><col class="col-xs-4 col-md-4" /><col class="col-xs-8 col-md-8" /></colgroup><tbody><tr><td><label>Survey link:</label></td><td><a class="dont-break-out" href="https://upenn.co1.qualtrics.com/jfe/form/SV_cNiPOAgJOvt8grr" target="_blank">https://____</a></td></tr></tbody></table><!-- End Content for Worker --><!-- Input from Worker --><div class="form-group"><label for="surveycode">Provide the survey code here:</label> <input class="form-control" id="surveycode" name="surveycode" placeholder="e.g. 123456" required="" type="text" /></div><!-- End input from Worker --></div>')
            $('#finishDiv').append('<p>Please mark your mood in the Valence Arousal scales.</p>');
            $('#finishDiv').show();
            $('#submitButton').show();
        }, totalTime2 * 1000);
    
    });
    
    
    </script>
    
    
    <!-- ***************************************************************************************************************************************** -->
    <div id="submitButton" style="position:inherit;margin:0 auto;width:500px;" >
        <div class="slidecontainer" id="slidecontainer3">
            <p id="line0">Valence Arousal scales:</p>
            <br>
            <p id="line01">Mark the scale according to how you feel now.</p>
            <br>
            <p id="line02">1 being <b>very sad</b> and 10 being <b>very happy</b></p>
            <input type="range" min="1" max="10" value="5" class="slider" id="myRange31">
            <p id="demo31">0</p>
            <script>var blockNumber = "b31";
                var slider31 = document.getElementById("myRange31");
                var output31 = document.getElementById("demo31");
                output31.innerHTML = slider31.value; // Display the default slider value
                // Update the current slider value (each time you drag the slider handle)
                slider31.oninput = function() {
                  output31.innerHTML = this.value;
                  var valence3= output31;
                }</script>
            <br>
            <p id="line03">1 being <b>very calm</b> and 10 being <b>very excited(or anxious)</b></p>
            <br>
            <input type="range" min="1" max="10" value="5" class="slider" id="myRange32">
            <p id="demo32">0</p>
            <script>var blockNumber = "b32";
                var slider32 = document.getElementById("myRange32");
                var output32 = document.getElementById("demo32");
                output32.innerHTML = slider32.value; // Display the default slider value
                // Update the current slider value (each time you drag the slider handle)
                slider32.oninput = function() {
                  output32.innerHTML = this.value;
                  var arousal3= output32;
                }</script>
            <p> This is the end of the experiment. Thank you for participating!</p>
          </div>
          <br>
        <div class="form-group"><br/>
            <label for="wblid">Please enter your MTurk ID/ WBL ID/ Student Roll No. here:</label> <br/>
            <input class="form-control" id="wblid" name="wblid" placeholder="" required="" type="text" />
            <input type="hidden" name="bucket_key" value="mturk"/>
        </div>
    <input type="submit" value="Submit">
    </div>
    <script>
        
        // function addObservation(valence1, arousal1, valence2, arousal2, valence3, arousal3){
        //         $('#data').append('<input name="' + eventLabel + '" class="valence1" value="' + valence1 + '" type="hidden">');
        //         $('#data').append('<input name="' + eventLabel + '" class="arousal1" value="' + arousal1 + '" type="hidden">');
        //         $('#data').append('<input name="' + eventLabel + '" class="valence2" value="' + valence2 + '" type="hidden">');
        //         $('#data').append('<input name="' + eventLabel + '" class="arousal2" value="' + arousal2 + '" type="hidden">');
        //         $('#data').append('<input name="' + eventLabel + '" class="valence3" value="' + valence3 + '" type="hidden">');
        //         $('#data').append('<input name="' + eventLabel + '" class="arousal3" value="' + arousal3 + '" type="hidden">');
        // console.log($("#data"));
        // }
    
    </script>
    
    </form>
    <!--  -->
    